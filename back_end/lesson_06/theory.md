

## Spring

* Реализует подход IoC/DI

### Основные понятия

* `Bean (бин)` - это объект какого-либо класса, который контролируется Spring-ом. Spring создает объект, помещает его в Spring Aplication Context, при необходтмости внедряет его как зависимость в другие объекы.      
Когда обычный объект называют "бином Spring"? Когда этот объект был создан Spring-ом.

* `Spring Aplication Context` (контекст приложения) - это главный интерфейс в Spring-приложении, который предоставляет информацию о конфигурации приложения. Упрощенно, Aplication Context - структура данных,
которая хранит и предоставляет по-требованию бины.

### Создание бинов. Аннотации  `@Component`, `@Bean`

Spring создает `бин` на основе любого класса помеченного аннотацие `@Component`

```java
    @Component
    public class RepositoryImpl() {
        ......
    }
```
в данном случае будет создан бин с типом RepositoryImpl и именем (id) repositoryImpl. 
  * в параметре аннотации компонент можно в явном вмде указать имя бина @Component("myBeanName")
  * аннотации `@Service`, `@Repository`, `@Controller` являются наследниками аннотации `@Component`, соответственно тоже могут быть использованы для определения бина
  * для того, что бы Spring просканировал классы и "нашел" классы помеченные аннотацией `@Component` необходимо использовать аннотацию `@ComponentScan`, например, над конфигурационным классом (см. ниже) 


Второй способ определить бины в приложении  создать класс, например, AppConfig, пометить его аннотацией `@Configuration`,  в котором мы описываем "бины". 
Этот класс указываем как параметр при создании  `Spring Context`, а именно:

```java
AnnotationConfigApplicationContext сontext = new AnnotationConfigApplicationContext(AppConfig.class);
```

Каждый бин характеризуется своим "названием/id" и классом, на основе которого он создан. В случае, если мы создаем бин с помощью метода, например:

```
    @Bean
    public UserRepository userRepository() {
        return new UserRepositoryImpl();
    }
```
UserRepository - тип бина, userRepository - id бина  

* `@Bean` - аннотация, которой мы помечаем метод, результатом работы которого является какой-либо бин. Т.е. что бы получить этот бин, спринг выполнит этот метод

```
@Bean
public Scanner scanner() {
    return new Scanner(System.in);
}
```


В метод, который помечен аннотацией `@Bean` можно подставить другие бины в параметрах метода.
Название параметра должно соответствовать названию бина, если у вас несколько бинов одинакового типа. 
Если бин по такому типу только один - на название параметра все равно.
Используя аннотацию @Qualifier можно в явном виде указать необходимый бин.


* Положить бин в контейнер можно с помощью аннотации `@Bean`
* Получить бин из контейнера можно с помощью:
  * `applicationContext.getBean(ТипНужногоБина.class)`
  * `applicationContext.getBean(Id-нужного-бина, ТипНужногоБина.class)`

